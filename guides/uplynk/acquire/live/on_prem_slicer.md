---
title: On Prem Slicer
---

The On Prem Slicer (aka Live Slicer) captures content from a live signal and sends it to the cloud for encoding. This tool runs as a daemon process on a Linux system. It is controlled using [standard initctls Command](#administration).

## Install the Live Slicer  {/*install-the-live-slicer*/}

### Pre-requisites  {/*pre-requisites*/}

Perform the following steps before installing the Live Slicer:

1. **Verify System Requirements**: Ensure that the desired computer meets or exceeds the minimum system requirements:


    | Component | Description|
    |----------|-----|
    | CPU   | Quad-core x86-64 (2GHz)|
    | Memory| 6 GB |
    | Storage| 80 GB|
    | Upload Bandwidth| Your upload bandwidth should exceed the bandwidth generated by the encoder for the top ray by 25\%. The amount of bandwidth generated by your encoder varies by encoding profile. For example, the default [encoding profile](/uplynk/acquire/encoding_profiles) (i.e., HD 720p25\/30) requires 5 Megabits per second (Mbps). <Warning>Insufficient bandwidth may affect performance and result in slate.</Warning> |
    | OS    | Optimized for: <br /> - Ubuntu Linux 14.04 LTS 64-bit or higher (tested on 14.04 LTS and 16.04 LTS) <br /> - CentOS 7 64-bit or higher |
    | Live Feed | The broadcasting infrastructure must transmit data to the Live Slicer using one of the following technologies: <br /> - **UDP**: Use either a UDP unicast or multicast MPEG2 transport stream. <br /> - **SDI**: Requires installation of one of the following Blackmagic DeckLink SDI cards: Decklink Duo 2 or Decklink Quad 2. Install Blackmagic DeckLink drivers from [Blackmagic's site](https://www.blackmagicdesign.com/support). <br /> - **RTMP**: By default, the service expects your encoder to push the RTMP stream to a Live Slicer. You may configure a Live Slicer to pull the RTMP stream from your encoder through the [`enable_rtmp_pull`](#configuration-file-settings) setting. <br /> - **SRT**: Use a SRT MPEG2 transport stream. <br /> - **TCP**: Use a TCP MPEG2 transport stream. Ensure optimal data transmission rates by placing the source of the live feed in close proximity to the Live Slicer. |
    | Ports | Outbound connections on ports 80 and 443    |

2. **Configure Firewall**
   - Allow outbound connections on ports 80 and 443.
   - The Live Slicer relies on these ports to communicate with our services and to upload encrypted slices for encoding.

3. **Verify System Time**
   - Ensure that the system time on the computer hosting the Live Slicer is accurate.
   - Use Network Time Protocol (NTP) to sync your Linux server's time with a public time server.

### Install or Upgrade a Live Slicer

Perform these steps when installing or upgrading the Live Slicer to the latest version.

<Tip>If you plan on using a Blackmagic DeckLink SDI capture card, then the Live Slicer must be installed on the computer where that card is housed.</Tip>

1. Live Slicer version 21092100 or higher: Install the `libnl-3.200` library.

    **Command**: `sudo apt install libnl-3-200`

2. Python and bzip2: Install the `python bzip2` applications.

    **Command**: `sudo apt install python bzip2`

3. Download the Live Slicer by clicking **Downloads** from the bottom right-hand corner of the CMS and then clicking on the desired OS.

4. Extract the zip file to the desired directory.

    **Command**: `$ tar -xvf uplynk_slicer_linux_64-231114.04.01.tbz2`

    ```
    uplynk_slicer_linux_64-231114.04.01-master/

    uplynk_slicer_linux_64-231114.04.01-master/slicebot.cfg.example

    uplynk_slicer_linux_64-231114.04.01-master/libfreetype.so.6

    uplynk_slicer_linux_64-231114.04.01-master/libavcodec.so.57

    uplynk_slicer_linux_64-231114.04.01-master/libcares.so.2

    uplynk_slicer_linux_64-231114.04.01-master/slicer

    uplynk_slicer_linux_64-231114.04.01-master/example.conf

    uplynk_slicer_linux_64-231114.04.01-master/libcrypto.so.1.0.0

    uplynk_slicer_linux_64-231114.04.01-master/libssl.so.1.0.0

    uplynk_slicer_linux_64-231114.04.01-master/liveslicer

    uplynk_slicer_linux_64-231114.04.01-master/font_i420.dat

    uplynk_slicer_linux_64-231114.04.01-master/libavfilter.so.6

    uplynk_slicer_linux_64-231114.04.01-master/ca-bundle.crt

    uplynk_slicer_linux_64-231114.04.01-master/install_live

    uplynk_slicer_linux_64-231114.04.01-master/libswscale.so.4

    uplynk_slicer_linux_64-231114.04.01-master/libswresample.so.2.4.100

    uplynk_slicer_linux_64-231114.04.01-master/libbeam-slicer.so

    uplynk_slicer_linux_64-231114.04.01-master/libopus.so.0

    uplynk_slicer_linux_64-231114.04.01-master/libopus.so.0.5.0

    uplynk_slicer_linux_64-231114.04.01-master/LICENSE.txt

    uplynk_slicer_linux_64-231114.04.01-master/slicebot

    uplynk_slicer_linux_64-231114.04.01-master/README.html

    uplynk_slicer_linux_64-231114.04.01-master/libavformat.so.57

    uplynk_slicer_linux_64-231114.04.01-master/libavformat.so.57.58.101

    uplynk_slicer_linux_64-231114.04.01-master/libavutil.so.55
    ```

5. Navigate to the newly created directory.

    **Command**: `$ cd uplynk_slicer_linux_64-231114.04.01-master/`

6. Run `install_live`.

    **Command**: `$ sudo ./install_live`

## Configure the Live Slicer  {/*configure-the-live-slicer*/}

Upon installing the Live Slicer, the following configuration file will be created: `/etc/uplynk.conf`

Use this file to configure the Live Slicer. View a [sample configuration file](https://docs.edgecast.com/video/Content/Resources/Supplemental/LiveSlicerConf).

Update the following settings in your Live Slicer configuration file:

| Setting | Description    |
|-------------|--------|
| description | Set this to a description that will be assigned to new assets.    |
| username    | Set this to the email address associated with your account.|
|apikey|If missing, add a line for the apikey setting. Set it to your secret API key. Leverage our API to generate an API key that only authorizes slicer-related actions by creating a sub-owner that has only been granted the `slice` permission. [Learn more](https://docs.edgecast.com/video/Content/Develop/Sub-Owners.htm). Find your API key via the [Integration Keys page](https://cms.uplynk.com/static/cms2/index.html#/settings/integration-keys) > **Settings** tab > **Integration Keys** from the side navigation. Your API key(s) are listed under the API Keys section.<br />**Example**: `apikey: bcDEFghiJKLmnoPQRtuvWXYz123ABCdefGHIJKL`|
| slicerID    | Set this to a case-sensitive alphanumeric value by which this Live Slicer will be identified. <br /> A Live Slicer may broadcast content via one or more live channels or live events. <br />Assign a Live Slicer to a live channel and/or a live event via the **Slicer ID** option. Information on how to find this option is provided below.<br />**Live Channel**:<br />Select the live channel and then verify that the **Details** tab is active.<br />**Live Event**:<br />Open the desired live event configuration and then click on the Slicers tab.<br />Verify the case of the Live Slicer's ID when setting up your live channel or live event.|

Once you have defined the above settings, the configuration file will need to updated to reflect your signal source (e.g., SDI, UDP, or RTMP).

<Info>If you plan on streaming over RTP, then you must process your audio/video feed using [ffmpeg](https://ffmpeg.org/) and serve it over UDP.</Info>

**Instructions per your signal source**:

- **SDI (Blackmagic DeckLink SDI card)**: Please review and/or update these Live Slicer configuration settings to reflect your installation. See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details.

    | Setting | Description |
    |---|---|
    | input | Verify that this setting is set to `blackmagic`. |
    | card | Verify that this setting is set to the card number corresponding to your Blackmagic DeckLink SDI card. |
    | SCTE104_DID | Verify that this setting correctly identifies the DID for SCTE104 triggers. |
    | SCTE104_SDID | Verify that this setting correctly identifies the SDID for SCTE104 triggers. |
    | captions_DID | Verify that this setting correctly identifies the DID for closed captioning. |
    | captions_SDID | Verify that this setting correctly identifies the SDID for closed captioning. |
    | ancillary_lines | Verify that this setting accurately reflects the ancillary lines to be scanned. |

- **UDP**: Please update these Live Slicer configuration settings to reflect your installation. See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details.

    | Setting| Action    | Description|
    |----------------------|---------------|------|
    | card   | Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | SCTE104_DID| Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | SCTE104_SDID     | Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | captions_DID     | Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | captions_SDID    | Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | ancillary_lines  | Remove/Ignore | This setting does not apply to UDP streaming and will be ignored.|
    | input  | Modify  | Set it to `udp`.  |
    | unicast or multicast | Add | Add either a unicast or multicast setting to the configuration file. Set it to the IP address of the computer generating the UDP stream. |
    | port   | Add | Add this setting and set it to the port on which the Live Slicer will listen for the UDP stream.|
    | rtp_headers| Add | **RTP Only**: Add this setting and set it to `1`. <br /> If you do not plan on using RTP and this setting is present in your configuration file, then either remove this setting or set it to `0`. |
    | rtp_readahead_dur| Add | **RTP Only**: Add this setting and set it to the number of seconds (e.g., `2.0`) that the Live Slicer will wait before uploading the stream to the cloud. |
    | rtp_backlog_dur  | Add | **RTP Only**: Add this setting and set it to the number of seconds (e.g., `1.4`) for which packet history will be preserved to reduce dropped packets. |
    | rtp_redundant_feed | Add| **RTP Only**: Add this setting and set it to a URL that points to a redundant RTP feed through which the original stream will be reconstructed. <br /> A redundant RTP feed requires the source computer to have two network routes (e.g., 2-port network card). <br /> **Sample configuration**: `rtp_redundant_feed: rtp://stream.example.com:1234` |

    <Tip>If you plan on streaming RTP over UDP, then use the Status endpoint of the Live Slicer API to monitor your RTP feeds and FEC status.</Tip>

    **Multiple Ethernet Adapters**<br />The Live Slicer listens for data on all interfaces. If multiple interfaces are available, then a packet may be received on one interface and then routed to a different one. This may cause the Linux kernel to apply reverse path filtering and therefore drop inbound packets that would have been routed to a different interface.

    **Example**:<br />A packet is received from 239.0.0.0 on eth1. Sending a packet back to 239.0.0.0 would result in the packet being routed to eth0. This would trigger reverse path filtering and the inbound packet from eth1 would be dropped.

    **Solution**:<br />The solution for this issue is to ensure that the desired multicast IP address is routable to the interface on which the Live Slicer will be listening.

    <Info>An alternative solution is to disable reverse path filtering. However, it is important to become acquainted with the security implications of this solution prior to its implementation.</Info>


- **RTMP**

    <Info>Please do not publish your stream until after you have configured the Live Slicer to ingest RTMP, restarted it, and it is in the waiting for data state. Please restart stream encoding when your encoder cannot connect to the Live Slicer.</Info>

    <Info>The RTMP source is incompatible with SCTE, ad breaks, or Action Message Format (AMF).</Info>

    Please update these Live Slicer configuration settings to reflect your installation.

    | Setting | Action | Description |
    |---|---|---|
    | card | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | SCTE104_DID | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | SCTE104_SDID | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | captions_DID | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | captions_SDID | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | ancillary_lines | Remove/Ignore | This setting does not apply to the RTMP source and will be ignored. |
    | input | Modify | Set it to `rtmp`.<br />See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |
    | rtmp_url | Add | Add this setting and set it to the URL for the RTMP stream that your encoder will push to the Live Slicer.<br />You may configure the Live Slicer to pull the RTMP stream from your encoder through the enable_rtmp_pull setting. <br/>See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details.|

- **SRT**: Please update these Live Slicer configuration settings to reflect your installation.

    | Setting | Action | Description |
    |---|---|---|
    | card | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | SCTE104_DID | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | SCTE104_SDID | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | captions_DID | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | captions_SDID | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | ancillary_lines | Remove/Ignore | This setting does not apply to SRT streaming and will be ignored. |
    | input | Modify | Set it to `srt`.<br/>See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |
    | input_addr | Add | Set it to the IP address of the computer generating the SRT stream.<br/>See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |
    | port | Add | Add this setting and set it to the port on which the Live Slicer will listen for the SRT stream.<br/>See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |


- **TCP**: Please update these Live Slicer configuration settings to reflect your installation.

    | Setting | Action | Description |
    |---|---|---|
    | card | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | SCTE104_DID | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | SCTE104_SDID | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | captions_DID | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | captions_SDID | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | ancillary_lines | Remove/Ignore | This setting does not apply to TCP streaming and will be ignored. |
    | input | Modify | Set it to `tcp`. See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |
    | input_addr | Add | Set it to the IP address of the computer generating the TCP stream.See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details. |
    | port | Add | Add this setting and set it to the port on which the Live Slicer will listen for the TCP stream. See [Live Slicer Configuration File Settings](#configuration-file-settings) for setting details.|

    <Info>The Live Slicer must be [restarted](#administration) for configuration changes to take effect.</Info>

    <Info>Additional settings may be added to define the audio/video tracks to be processed, define the language for audio tracks, and to specify a description for audio tracks. [View a comprehensive listing of settings.](#configuration-file-settings)</Info>

### SCTE 35/104 Signal Processing

By default, the Live Slicer performs basic SCTE 35/104 signal processing. Specifically, it converts SCTE 104 to SCTE 35 and then applies SCTE 35 signal processing to it. This allows a [single plugin](/uplynk/acquire/live/scte_plugins/#baseline-scte-plugin) to support SDI, UDP, and RTMP. If the SCTE processing provided by the baseline plugin is insufficient, use the [Python plugin](/uplynk/acquire/live/scte_plugins/#python-scte-plugin) to add custom Python functions.

**Disable SCTE processing**<br />Define the following setting in your Live Slicer configuration file:<br />`scte_type: none`

### Metadata

By default, metadata is not defined for assets generated by the Live Slicer. However, an asset's metadata may be defined through any of the following methods:

- **Live Slicer Configuration File**: Use the meta configuration parameter to define a key/value pair for the desired metadata field. By default, the metadata defined by this parameter will be assigned to assets generated by the Live Slicer.

    Define additional metadata fields by specifying this configuration parameter on a separate line for each desired field.

    **Example**:

    ```
    meta MyField1=ValueA

    meta MyField2=ValueB
    ```

- **Live Slicer API**: Assign metadata to a particular asset through the [add_meta method](#ad-meta).

    <Tip>The add_meta method takes precedence when the same metadata field is defined by both methods.</Tip>

<Info>Metadata may be defined when setting up a live channel. However, this metadata only applies to the live channel object. Assets generated from a live channel will not inherit metadata from that live channel.</Info>

## Color Space

By default, the Live Slicer will automatically convert the input signal's color standard to either HDR10 or SDR according to whether your [encoding profile](/uplynk/acquire/encoding_profiles) supports HDR.

| Encoding Profile | Color Standard (Source) | Color Standard (Output) |
|---|---|---|
| HDR | HDR (including HLG) or SDR<br />All SDR source content, including ads, will be converted to HDR10. | HDR10 |
| SDR | HDR (including HLG) or SDR | SDR |

### Custom Color Representation

Customize color representation conversion by assigning a lookup table (LUT) to the desired color space conversion. Define this mapping through the rgb_lut setting.

**Key information**<br />
- Verify that your LUT adheres to Adobe's Cube LUT Specification 1.0.
You may define multiple RGB LUTs to adjust for different input signals. The Live Slicer determines which configuration to use based on the output signal's color standard (i.e., HDR10 or SDR). If multiple LUTs have been defined for that color standard, then it will use the configuration that best matches the input signal's color space and range.

- By default, the output signal's color space uses a narrow (i.e., limited) range (16 - 235). You may define the desired range when configuring the rgb_lut setting.<br />**Example**:<br />The following configuration uses a custom LUT to generate an HDR 10 output signal with a full range when the input signal is HLG:<br />`rgb_lut from hlg to hdr10,full /path/mylut.cube`
- Alternatively, you may explicitly define a color space, a color primary, the transformation characteristics, and the range.<br />**Example**:<br />The following configuration is equivalent to the above sample configuration:<br />`rgb_lut from colorspace:bt2020nc,primaries:bt2020,trc:arib-std-b67,range:tv to colorspace:bt2020nc,primaries:bt2020,trc:smpte2084,range:pc /path/mylut.cube`

See [Live Slicer Configuration File Settings](#configuration-file-settings).

## Audio

### Audio Ingest

The Live Slicer's behavior with regards to audio ingest varies depending on whether you are streaming over UDP, RTMP, or SDI.

- **UDP \/ RTMP \/ SRT \/ TCP**<br />You must specify each audio track that will be ingested via the `pids` parameter.<br />**<br />**Example**<br />**<br />The following configuration initializes the audio tracks that correspond to the packets with identifiers 308, 256, 257, and 258:<br />`pids: 308,256,257,258`

- **SDI**: The Live Slicer automatically ingests the audio tracks that correspond to SDI channels 0 - 15.

### Audio Codec  {/*audio-codec*/}

By default, the Live Slicer encodes audio using the Advanced Audio Coding (AAC) audio codec. However, you may configure it to encode an audio track into Dolby Digital Plus (DD+) and AAC subtracks by passing the `audio_dolby_#` parameter.

<Info>Playback of DD+ audio subtracks requires the ddp playback URL parameter.</Info>

**Sample Configurations**

- **UDP**: The following configuration will encode track 257 as DD+ and encode all of the other tracks (i.e., 257, 258, and 308) defined by the pids parameter as AAC:

    ```
    pids: 308,256,257,258
    audio_lang_256: eng
    audio_desc_256: primary
    audio_lang_257: eng
    audio_desc_257: secondary
    audio_dolby_257: 1
    ```

- **SDI**: The following configuration will encode the audio track for SDI channel 7 as DD+ and encode all of the other tracks (i.e., SDI channels 0 - 6 and 8 - 15) as AAC: `audio_dolby_7: 1`

### Audio Normalization

By default, assets are encoded at approximately the same level of loudness. This level may be adjusted via the `gain` setting. Use this setting to determine the gain or attenuation, in decibels, that should be applied to the live signal as it is encoded.

<Info>The Live Slicer logs the calculated gain value every ten seconds. Monitor `/var/log/syslog` to find the appropriate value for the `gain` setting.</Info>

### Audio Channel Layout (SDI Signal)

The Live Slicer may be configured to use either Standard or Custom audio channel layouts.

#### Standard Layout (SDI Signal)

Configure a standard audio channel layout through the use of `the audio_layout` parameter.

| Audio Channel | Channel Layout|
|-----------|----|
| stereo 1| <ul><li>1: Left</li><li>2: Right</li></ul>    |
| stereo 2| <ul><li>3: Left</li><li>4: Right</li></ul>    |
| stereo 3| <ul><li>5: Left</li><li>6: Right</li></ul>    |
| stereo 4| <ul><li>7: Left</li><li>8: Right</li></ul>    |
| stereo 5| <ul><li>9: Left</li><li>10: Right</li></ul>   |
| stereo 6| <ul><li>11: Left</li><li>12: Right</li></ul> |
| stereo 7| <ul><li>13: Left</li><li>14: Right</li></ul> |
| stereo 8| <ul><li>15: Left</li><li>16: Right</li></ul>|
| 5.1     | <ul><li>1: Center</li><li>2: Left</li><li>3: Right</li><li>4: Rear Left</li><li>5: Rear Right</li><li>6: LFE (Sub)</li></ul> |
| CEA     | <ul><li>1: Left</li><li>2: Right</li><li>3: Center</li><li>4: LFE (Sub)</li><li>5: Surround Left</li><li>6: Surround Right</li></ul> |
| 7.1     | <ul><li>1: Center</li><li>2: Left</li><li>3: Right</li><li>4: Rear Left</li><li>5: Rear Right</li><li>6: LFE (Sub)</li><li>7: Surround Left</li><li>8: Surround Right</li></ul> |

#### Custom Audio Layout (SDI Signal)

A custom audio channel layout allows each audio track to be mapped to one or more channels. Additionally, a custom level may be assigned to each mapped channel.

##### Terminology

Before defining a custom audio layout, it is important to become acquainted with the following terminology:

- **SDI Channel**: Identifies a single unit within a representation of an audio stream. For example, the left portion of a stereo feed may consist of one or more SDI channels.
- **Track**: Identifies the set of channels required to produce a single representation of an audio stream. For example, an audio track for a stereo feed may consist of two or more SDI channels.

##### Setup

Setting up a custom audio channel layout requires replacing the `audio_layout` configuration setting with `audio_custom_layout_{Track}`. The configuration for this setting varies according to how audio should be mapped.

Use the following syntax to downmix audio to mono:<br />`audio_custom_layout_{Track}: mono|X={SDI_Input_Channel}@{Level}`

Use the following syntax to downmix audio to stereo:<br />`audio_custom_layout_{Track}: stereo|L={SDI_Input_Channel}@{Level},R={SDI_Input_Channel}@{Level}`

Use the following syntax to downmix audio to 5.1:<br />`audio_custom_layout_{Track}: 5.1|C={SDI_Input_Channel}@{Level},L={SDI_Input_Channel}@{Level},R={SDI_Input_Channel}@{Level},RL={SDI_Input_Channel}@{Level},RR={SDI_Input_Channel}@{Level},LFE={SDI_Input_Channel}@{Level}`
